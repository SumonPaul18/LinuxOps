# Linux-Based Storage Server: Complete Comprehensive Guide

> **Author**: Sumon  
> **Role**: DevOps & Cloud Engineer | Linux System Administrator  
> **Last Updated**: December 17, 2025  

---

## ЁЯУЪ ржЯрзЗржмрж┐рж▓ ржЕржл ржХржиржЯрзЗржирзНржЯ (Table of Contents)

1. [ржнрзВржорж┐ржХрж╛](#ржнрзВржорж┐ржХрж╛)  
2. [Linux Storage Server: ржХрзА ржПржмржВ ржХрзЗржи?](#linux-storage-server-ржХрзА-ржПржмржВ-ржХрзЗржи)  
3. [рж╕рзНржЯрзЛрж░рзЗржЬ рж╢рзЗржпрж╝рж╛рж░рж┐ржВржпрж╝рзЗрж░ ржкрзНрж░рзЛржЯрзЛржХрж▓рж╕ржорзВрж╣ (NFS, SMB/CIFS, iSCSI ржЫрж╛ржбрж╝рж╛ ржЕржирзНржпрж╛ржирзНржп)](#рж╕рзНржЯрзЛрж░рзЗржЬ-рж╢рзЗржпрж╝рж╛рж░рж┐ржВржпрж╝рзЗрж░-ржкрзНрж░рзЛржЯрзЛржХрж▓рж╕ржорзВрж╣-nfs-smbcifs-iscsi-ржЫрж╛ржбрж╝рж╛-ржЕржирзНржпрж╛ржирзНржп)  
4. [ржбрж┐рж╕рзНржХ ржбрж┐ржЯрзЗржХрж╢ржи ржУ ржкрж╛рж░рзНржЯрж┐рж╢ржирж┐ржВ (рж╕ржорзНржкрзВрж░рзНржг ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ)](#ржбрж┐рж╕рзНржХ-ржбрж┐ржЯрзЗржХрж╢ржи-ржУ-ржкрж╛рж░рзНржЯрж┐рж╢ржирж┐ржВ-рж╕ржорзНржкрзВрж░рзНржг-ржзрж╛ржкрзЗ-ржзрж╛ржкрзЗ)  
5. [ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо рждрзИрж░рж┐ ржУ ржорж╛ржЙржирзНржЯ ржкржпрж╝рзЗржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи](#ржлрж╛ржЗрж▓-рж╕рж┐рж╕рзНржЯрзЗржо-рждрзИрж░рж┐-ржУ-ржорж╛ржЙржирзНржЯ-ржкржпрж╝рзЗржирзНржЯ-ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи)  
6. [/etc/fstab ржП ржкрж╛рж░рзНржорж╛ржирзЗржирзНржЯ ржПржирзНржЯрзНрж░рж┐ ржпрзЛржЧ ржХрж░рж╛](#etcfstab-ржП-ржкрж╛рж░рзНржорж╛ржирзЗржирзНржЯ-ржПржирзНржЯрзНрж░рж┐-ржпрзЛржЧ-ржХрж░рж╛)  
7. [ржЕрждрж┐рж░рж┐ржХрзНржд рж╕рзНржЯрзЛрж░рзЗржЬ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржЯрзЗржХржирж┐ржХрж╕](#ржЕрждрж┐рж░рж┐ржХрзНржд-рж╕рзНржЯрзЛрж░рзЗржЬ-ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ-ржЯрзЗржХржирж┐ржХрж╕)  
8. [рж╕рзНржЯрзЛрж░рзЗржЬ ржоржирж┐ржЯрж░рж┐ржВ, ржорзЗржЗржиржЯрзЗржирзНржпрж╛ржирзНрж╕ ржУ ржЯрзНрж░рж╛ржмрж▓рж╢рзБржЯрж┐ржВ](#рж╕рзНржЯрзЛрж░рзЗржЬ-ржоржирж┐ржЯрж░рж┐ржВ-ржорзЗржЗржиржЯрзЗржирзНржпрж╛ржирзНрж╕-ржУ-ржЯрзНрж░рж╛ржмрж▓рж╢рзБржЯрж┐ржВ)  
9. [рж╕рзБрж░ржХрзНрж╖рж╛ ржмрж┐ржмрзЗржЪржирж╛ (Security Best Practices)](#рж╕рзБрж░ржХрзНрж╖рж╛-ржмрж┐ржмрзЗржЪржирж╛-security-best-practices)  
10. [ржЙржкрж╕ржВрж╣рж╛рж░](#ржЙржкрж╕ржВрж╣рж╛рж░)

---

## ржнрзВржорж┐ржХрж╛

Linux-ржнрж┐рждрзНрждрж┐ржХ рж╕рзНржЯрзЛрж░рзЗржЬ рж╕рж╛рж░рзНржнрж╛рж░ рж╣рж▓ ржПржоржи ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржпрж╛ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯржХрзЗ рж╕рзЗржирзНржЯрзНрж░рж╛рж▓рж╛ржЗржЬржб ржлрж╛ржЗрж▓, ржбрзЗржЯрж╛ ржмрж╛ ржмрзНрж▓ржХ рж╕рзНржЯрзЛрж░рзЗржЬ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред ржПржЯрж┐ ржПржирзНржЯрж╛рж░ржкрзНрж░рж╛ржЗржЬ, рж╣рзЛржо рж▓рзНржпрж╛ржм, ржХрзНрж▓рж╛ржЙржб ржмрж╛ ржбрзЗржнржЕржкрж╕ ржЗржиржлрзНрж░рж╛рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░рзЗ ржмрзНржпрж╛ржкржХржнрж╛ржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред

ржПржЗ ржЧрж╛ржЗржбрзЗ ржЖржорж░рж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ NFS, Samba, ржмрж╛ iSCSI ржиржпрж╝тАФржмрж░ржВ **рж╕ржорзНржкрзВрж░рзНржг рж╕рзНржЯрзЛрж░рзЗржЬ рж▓рж╛ржЗржлрж╕рж╛ржЗржХрзЗрж▓**, ржЕржирзНржпрж╛ржирзНржп рж╢рзЗржпрж╝рж╛рж░рж┐ржВ ржорзЗржержб, ржкрж╛рж░рзНржЯрж┐рж╢ржирж┐ржВ ржЕржкрж╢ржи, ржлрж╛ржЗрж▓рж╕рж┐рж╕рзНржЯрзЗржо, ржорж╛ржЙржирзНржЯрж┐ржВ, ржорзЗржЗржиржЯрзЗржирзНржпрж╛ржирзНрж╕, рж╕рзБрж░ржХрзНрж╖рж╛ ржПржмржВ ржкрзНрж░ржлрзЗрж╢ржирж╛рж▓ ржмрзЗрж╕рзНржЯ ржкрзНрж░рзНржпрж╛ржХржЯрж┐рж╕ржЧрзБрж▓рж┐ ржирж┐ржпрж╝рзЗ ржЖрж▓рзЛржЪржирж╛ ржХрж░ржмред

---

## Linux Storage Server: ржХрзА ржПржмржВ ржХрзЗржи?

ржПржХржЯрж┐ Linux рж╕рж╛рж░рзНржнрж╛рж░ ржпрж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ **ржлрж╛ржЗрж▓ ржмрж╛ ржмрзНрж▓ржХ рж╕рзНржЯрзЛрж░рзЗржЬ** ржкрзНрж░ржжрж╛ржирзЗрж░ ржЬржирзНржп ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рзЛ (ржпрзЗржоржи: ржЕржлрж┐рж╕ ржХржорзНржкрж┐ржЙржЯрж╛рж░, рж╕рж╛рж░рзНржнрж╛рж░, VM) ржПржЗ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржбрж╛ржЯрж╛ рж╢рзЗржпрж╝рж╛рж░, ржорж╛ржЙржирзНржЯ ржмрж╛ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

**ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржХрзНрж╖рзЗрждрзНрж░**:

- ржЕржлрж┐рж╕/ржХржорзНржкрж┐ржЙржЯрж╛рж░ рж▓рзНржпрж╛ржмрзЗ рж╕рзЗржирзНржЯрзНрж░рж╛рж▓ ржлрж╛ржЗрж▓ рж╕рзНржЯрзЛрж░рзЗржЬ
- ржорж┐ржбрж┐ржпрж╝рж╛ рж╕рж╛рж░рзНржнрж╛рж░ (ржнрж┐ржбрж┐ржУ/ржЕржбрж┐ржУ рж╢рзЗржпрж╝рж╛рж░)
- ржмрзНржпрж╛ржХржЖржк рж╕рж╛рж░рзНржнрж╛рж░
- DevOps ржУ CI/CD-рждрзЗ Artifact Storage
- ржХрзНрж▓рж╛ржЙржб рж▓рзНржпрж╛ржмрзЗ ржкрж╛рж░рзНрж╕рж┐рж╕рзНржЯрзЗржирзНржЯ ржнрж▓рж┐ржЙржорзЗрж░ ржЬржирзНржп NFS (Kubernetes-ржП ржмрзНржпржмрж╣рзГржд)

---

## 2. ржХрзЛржи ржзрж░ржирзЗрж░ Storage Solution ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

|ржзрж░ржи|ржмрж░рзНржгржирж╛|ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржХрзНрж╖рзЗрждрзНрж░|
|---|---|---|
|**DAS** (Direct Attached Storage)|ржбрж┐рж╕рзНржХ рж╕рж░рж╛рж╕рж░рж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржмрж╕рж╛ржирзЛ (HDD/SSD)|рж╕рж┐ржЩрзНржЧрзЗрж▓ рж╕рж╛рж░рзНржнрж╛рж░ рж▓рзЛржХрж╛рж▓ рж╕рзНржЯрзЛрж░рзЗржЬ|
|**NAS** (Network Attached Storage)|ржлрж╛ржЗрж▓ рж▓рзЗржнрзЗрж▓ рж╢рзЗржпрж╝рж╛рж░рж┐ржВ (NFS/SMB)|ржЕржлрж┐рж╕, ржлрж╛ржЗрж▓ рж╢рзЗржпрж╝рж╛рж░рж┐ржВ|
|**SAN** (Storage Area Network)|ржмрзНрж▓ржХ рж▓рзЗржнрзЗрж▓ рж╕рзНржЯрзЛрж░рзЗржЬ (iSCSI)|ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓рж╛ржЗржЬрзЗрж╢ржи, ржбрж╛ржЯрж╛ржмрзЗржЬ|

> **ржЖржкржирж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржирзЗ рж╕ржмржЪрзЗржпрж╝рзЗ ржХржоржи рж╣рж▓рзЛ NAS**, ржпрж╛ Linux-ржП NFS ржмрж╛ Samba ржжрж┐ржпрж╝рзЗ рж╕рзЗржЯржЖржк ржХрж░рж╛ ржпрж╛ржпрж╝ред

---

## 3. ржлрж╛ржЗрж▓ рж╢рзЗржпрж╝рж╛рж░рж┐ржВ ржкрзНрж░рзЛржЯрзЛржХрж▓: ржХрзЛржиржЯрж╛ ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

|ржкрзНрж░рзЛржЯрзЛржХрж▓|ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо|ржмрзИрж╢рж┐рж╖рзНржЯрзНржп|
|---|---|---|
|**NFS** (Network File System)|Linux/Unix/VM/K8s|ржлрж╛рж╕рзНржЯ, рж▓рж╛ржЗржЯржУржпрж╝рзЗржЯ, ржорж╛ржЙржирзНржЯрзЗржмрж▓ тАФ DevOps/K8s-ржП ржкржкрзБрж▓рж╛рж░|
|**SMB/CIFS**|Windows + Linux|ржЗржЬрж┐ рж╢рзЗржпрж╝рж╛рж░рж┐ржВ, ржЧрзНрж░рж╛ржлрж┐ржХрж╛рж▓ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕, ржЗржЙржЬрж╛рж░ ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи|
|**iSCSI**|Any OS (ржмрзНрж▓ржХ ржбрж┐ржнрж╛ржЗрж╕)|RAW ржбрж┐рж╕рзНржХ ржорж╛ржЙржирзНржЯ, VM/ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржмрзНржпржмрж╣рзГржд|

> **ржкрзНрж░рж╕рзНрждрж╛ржм**:
> 
> - Linux-to-Linux тЖТ **NFS**
> - Mixed OS (Win + Linux) тЖТ **Samba (SMB)**
> - K8s Persistent Volume тЖТ **NFS**
> - VM Storage тЖТ **iSCSI** (рж▓рзЗржЯрж╛рж░ ржЖрж▓рзЛржЪржирж╛ ржХрж░ржмрзЛ)

### рж╕рзНржЯрзЛрж░рзЗржЬ рж╢рзЗржпрж╝рж╛рж░рж┐ржВржпрж╝рзЗрж░ ржкрзНрж░рзЛржЯрзЛржХрж▓рж╕ржорзВрж╣ (NFS, SMB/CIFS, iSCSI ржЫрж╛ржбрж╝рж╛ ржЕржирзНржпрж╛ржирзНржп)

### 1. **FTP / SFTP**
- **ржмрзНржпржмрж╣рж╛рж░**: ржлрж╛ржЗрж▓ ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░рзЗрж░ ржЬржирзНржпред
- **ржЯрзБрж▓рж╕**: `vsftpd`, `proftpd`, `OpenSSH` (SFTP)
- **рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐**: SFTP (SSH ржПржиржХрзНрж░рж┐ржкрж╢ржи), FTPS (TLS)

### 2. **HTTP/HTTPS ржнрж┐рждрзНрждрж┐ржХ рж╕рзНржЯрзЛрж░рзЗржЬ (WebDAV)**
- **ржмрзНржпржмрж╣рж╛рж░**: ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржмрж╛ ржорж╛ржЙржирзНржЯ ржХрж░рзЗ ржлрж╛ржЗрж▓ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ред
- **ржЯрзБрж▓рж╕**: `Apache + mod_dav`, `nginx + nginx-webdav`
- **ржХржорж╛ржирзНржб ржЙржжрж╛рж╣рж░ржг**: `davfs2` ржжрж┐ржпрж╝рзЗ ржорж╛ржЙржирзНржЯ ржХрж░рж╛ ржпрж╛ржпрж╝ред

### 3. **GlusterFS**
- **ржмрзНржпржмрж╣рж╛рж░**: ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯрзЗржб ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо рж╣рж┐рж╕рж╛ржмрзЗред
- **ржлрж┐ржЪрж╛рж░**: рж╕рзНржХрзЗрж▓рзЗржмрж▓, рж░рж┐ржкрзНрж▓рж┐ржХрзЗрж╢ржи, рж╕рзЗрж▓рзНржл-рж╣рж┐рж▓рж┐ржВред
- **рж╕рзЗржЯржЖржк**: ржорж╛рж▓рзНржЯрж┐-ржирзЛржб ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ ржерзЗржХрзЗ ржПржХржЯрж┐ ржнрж▓рж┐ржЙржо ржПржХрзНрж╕ржкрзЛржЬ ржХрж░рж╛ред

### 4. **Ceph**
- **ржмрзНржпржмрж╣рж╛рж░**: Object, Block, File рж╕ржм ржзрж░ржирзЗрж░ рж╕рзНржЯрзЛрж░рзЗржЬред
- **ржкрзНрж░рзЛржЯрзЛржХрж▓**: RBD (iSCSI-ржПрж░ ржорждрзЛ), CephFS (NFS-ржПрж░ ржорждрзЛ), RADOS Gateway (S3-рж╕рж╛ржоржЮрзНржЬрж╕рзНржпржкрзВрж░рзНржг)ред
- **ржмрзНржпржмрж╣рж╛рж░**: ржХрзНрж▓рж╛ржЙржб ржЗржиржлрзНрж░рж╛ (OpenStack, Kubernetes)

### 5. **MinIO / S3-рж╕рж╛ржоржЮрзНржЬрж╕рзНржпржкрзВрж░рзНржг рж╕рзНржЯрзЛрж░рзЗржЬ**
- **ржмрзНржпржмрж╣рж╛рж░**: ржЕржмржЬрзЗржХрзНржЯ рж╕рзНржЯрзЛрж░рзЗржЬ рж╣рж┐рж╕рж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред
- **ржкрзНрж░рзЛржЯрзЛржХрж▓**: Amazon S3 API
- **ржлрж┐ржЪрж╛рж░**: ржУржкрзЗржи рж╕рзЛрж░рзНрж╕, рж╣рж╛ржЗ-ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕, рж╕рж╣ржЬ ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯред

### 6. **OpenFiler / FreeNAS (ZFS-ржнрж┐рждрзНрждрж┐ржХ)**
> (ржлрзНрж░рж┐NAS ржПржЦржи TrueNAS) тАУ ржмрзЗрж╢рж┐рж░ржнрж╛ржЧ ржЗржЙржирж┐ржХрзНрж╕-ржнрж┐рждрзНрждрж┐ржХ, рждржмрзЗ FreeNAS ZFS ржПржмржВ ржУржпрж╝рзЗржм UI рж╕рж╣ ржПржХржЯрж┐ ржкрзНрж░ржлрзЗрж╢ржирж╛рж▓ NAS рж╕ржорж╛ржзрж╛ржиред

### 7. **LIO (Linux-IO Target)**
- **ржмрзНржпржмрж╣рж╛рж░**: iSCSI ржЫрж╛ржбрж╝рж╛ржУ, **FCoE**, **SRP**, **vHost**, **loopback** ржкрзНрж░рзЛржЯрзЛржХрж▓ржЧрзБрж▓рж┐рж░ ржЬржирзНржп ржмрзНрж▓ржХ рж╕рзНржЯрзЛрж░рзЗржЬ ржЯрж╛рж░рзНржЧрзЗржЯ рждрзИрж░рж┐ ржХрж░рзЗред
- **ржЯрзБрж▓**: `targetcli`

---

## 4. рж╕рзНржЯрзЛрж░рзЗржЬ рж╕рж╛рж░рзНржнрж╛рж░ ржбрж┐ржЬрж╛ржЗржи ржкрзНрж░рж┐ржирзНрж╕рж┐ржкрж╛рж▓

### тЬЕ RAID (Redundancy)

- **RAID 1**: ржорж┐рж░рж░рж┐ржВ (2 ржбрж┐рж╕рзНржХ, рж╕рзЗржл)
- **RAID 5/6**: ржкрзНржпрж╛рж░рж┐ржЯрж┐ ржмрзЗрж╕ржб (3+ ржбрж┐рж╕рзНржХ, ржХрзНржпрж╛ржкрж╛рж╕рж┐ржЯрж┐ + рж░рзЗржбрж╛ржиржбрзЗржирзНрж╕рж┐)
- **RAID 10**: ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ + рж░рзЗржбрж╛ржиржбрзЗржирзНрж╕рж┐

> Use `mdadm` command.

### тЬЕ LVM (Logical Volume Manager)

- ржбрж┐рж╕рзНржХ ржПржХрзНрж╕ржЯрзЗржирж╢ржи рж╕рж╣ржЬ
- рж╕рзНржирзНржпрж╛ржкрж╢ржЯ рж╕рж╛ржкрзЛрж░рзНржЯ
- ржлрзНрж▓рзЗржХрзНрж╕рж┐ржмрж▓ ржкрж╛рж░рзНржЯрж┐рж╢ржи ржорзНржпрж╛ржирзЗржЬ

```
pvcreate /dev/sdb /dev/sdc
vgcreate vg_data /dev/sdb /dev/sdc
lvcreate -L 500G -n lv_shared vg_data
mkfs.xfs /dev/vg_data/lv_shared
```

---

## ржбрж┐рж╕рзНржХ ржбрж┐ржЯрзЗржХрж╢ржи ржУ ржкрж╛рж░рзНржЯрж┐рж╢ржирж┐ржВ (рж╕ржорзНржкрзВрж░рзНржг ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ)

### ржбрж┐рж╕рзНржХ ржЪрзЗржХ ржХрж░рзБржи
```bash
lsblk
fdisk -l
ls /dev/sd*
ls /dev/nvme*
```

### ржкрж╛рж░рзНржЯрж┐рж╢ржирж┐ржВржпрж╝рзЗрж░ 4 ржЯрж┐ ржкрзНрж░ржзрж╛ржи ржорзЗржержб

#### 1. **`fdisk` (MBR тАУ Legacy, тЙд2TB)**
```bash
sudo fdisk /dev/sdb
# n тЖТ p тЖТ 1 тЖТ Enter тЖТ Enter тЖТ w
```

#### 2. **`gdisk` (GPT тАУ Modern, >2TB рж╕рж╛ржкрзЛрж░рзНржЯ)**
```bash
sudo gdisk /dev/sdb
# n тЖТ 1 тЖТ Enter тЖТ Enter тЖТ 8300 (Linux filesystem) тЖТ w
```

#### 3. **`parted` (GPT/MBR, GUI рж╕рзНржЯрж╛ржЗрж▓ CLI)**
```bash
sudo parted /dev/sdb
(parted) mklabel gpt
(parted) mkpart primary ext4 0% 100%
(parted) print
(parted) quit
```

#### 4. **LVM (Logical Volume Management тАУ ржлрзНрж▓рзЗржХрзНрж╕рж┐ржмрж▓ рж╕рзНржЯрзЛрж░рзЗржЬ)**
```bash
# Physical Volume
sudo pvcreate /dev/sdb1

# Volume Group
sudo vgcreate vg_data /dev/sdb1

# Logical Volume
sudo lvcreate -l 100%FREE -n lv_storage vg_data

# ржлрж▓рж╛ржлрж▓: /dev/vg_data/lv_storage
```

> **рж╕рзБржкрж╛рж░рж┐рж╢**: ржирждрзБржи рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕ржмрж╕ржоржпрж╝ GPT (`gdisk`) ржмрж╛ LVM ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред ржорж╛рждрзНрж░ 1 ржбрж┐рж╕рзНржХрзЗ LVM ржХрж░рж▓рзЗржУ ржнржмрж┐рж╖рзНржпрждрзЗ рж╕рзНржХрзЗрж▓рж┐ржВ рж╕рж╣ржЬ рж╣ржмрзЗред

---

## ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо рждрзИрж░рж┐ ржУ ржорж╛ржЙржирзНржЯ ржкржпрж╝рзЗржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи

### ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо ржлрж░ржорзНржпрж╛ржЯ (ржХржпрж╝рзЗржХржЯрж┐ ржЬржиржкрзНрж░рж┐ржпрж╝ ржЕржкрж╢ржи)

| ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо | ржмрзНржпржмрж╣рж╛рж░ |
|----------------|---------|
| `ext4`         | рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб Linux ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо |
| `xfs`          | рж╣рж╛ржЗ-ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕, ржмржбрж╝ ржлрж╛ржЗрж▓ |
| `btrfs`        | рж╕рзНржирзНржпрж╛ржкрж╢ржЯ, ржХржорзНржкрзНрж░рзЗрж╢ржи, RAID |
| `zfs`          | ржПржирзНржЯрж╛рж░ржкрзНрж░рж╛ржЗржЬ, рж╕рзЗрж▓рзНржл-рж╣рж┐рж▓рж┐ржВ, ржХржорзНржкрзНрж░рзЗрж╢ржи |

### ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо рждрзИрж░рж┐
```bash
# ext4
sudo mkfs.ext4 /dev/sdb1

# xfs
sudo mkfs.xfs /dev/sdb1

# btrfs
sudo mkfs.btrfs /dev/sdb1
```

### ржорж╛ржЙржирзНржЯ ржкржпрж╝рзЗржирзНржЯ рждрзИрж░рж┐ ржУ ржорж╛ржЙржирзНржЯ ржХрж░рж╛
```bash
sudo mkdir -p /mnt/storage
sudo mount /dev/sdb1 /mnt/storage
```

> **ржЪрзЗржХ ржХрж░рзБржи**: `df -hT` тАУ ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо ржЯрж╛ржЗржк ржУ ржорж╛ржЙржирзНржЯ ржкржпрж╝рзЗржирзНржЯ ржжрзЗржЦрзБржиред

---

## /etc/fstab ржП ржкрж╛рж░рзНржорж╛ржирзЗржирзНржЯ ржПржирзНржЯрзНрж░рж┐ ржпрзЛржЧ ржХрж░рж╛

### ржзрж╛ржк рзз: UUID ржЦрзБржБржЬрзБржи (ржмрзЗрж╢рж┐ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржп)
```bash
sudo blkid
# ржЖржЙржЯржкрзБржЯ: /dev/sdb1: UUID="abcd-1234" TYPE="ext4"
```

### ржзрж╛ржк рзи: /etc/fstab ржПржбрж┐ржЯ ржХрж░рзБржи
```bash
sudo nano /etc/fstab
```

### ржзрж╛ржк рзй: ржПржирзНржЯрзНрж░рж┐ ржпрзЛржЧ ржХрж░рзБржи (ржЙржжрж╛рж╣рж░ржг: ext4)
```conf
UUID=abcd-1234   /mnt/storage   ext4   defaults,noatime  0 2
```

### ржлрж┐рж▓рзНржб ржмрзНржпрж╛ржЦрзНржпрж╛:
| ржлрж┐рж▓рзНржб | ржорж╛ржирзЗ |
|-------|------|
| 1 | ржбрж┐ржнрж╛ржЗрж╕ (UUID ржмрж╛ /dev/sdb1) |
| 2 | ржорж╛ржЙржирзНржЯ ржкржпрж╝рзЗржирзНржЯ |
| 3 | ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо ржЯрж╛ржЗржк |
| 4 | ржорж╛ржЙржирзНржЯ ржЕржкрж╢ржи (defaults, noatime, acl ржЗрждрзНржпрж╛ржжрж┐) |
| 5 | dump (0 = disable) |
| 6 | fsck ржЕрж░рзНржбрж╛рж░ (0 = no check, 1 = root, 2 = others) |

### ржзрж╛ржк рзк: ржЯрзЗрж╕рзНржЯ ржХрж░рзБржи
```bash
sudo mount -a
# ржХрзЛржирзЛ ржПрж░рж░ ржирж╛ ржжрзЗржЦрж╛рж▓рзЗ ржарж┐ржХ ржЖржЫрзЗ
```

---
## 5. Step-by-Step: NFS-Based Storage Server (Linux-to-Linux)

### ЁЯОп рж╕рж┐ржирж╛рж░рж┐ржУ:  
ржбрзЗржнрж╕ ржЯрж┐ржорзЗрж░ ржЬржирзНржп `/data/devops` рж╢рзЗржпрж╝рж╛рж░ ржХрж░ржмрзЛ тАФ рж╕ржмрж╛ржЗ read/write ржкрж╛ржмрзЗред

### тЬЕ Step 1: NFS рж╕рж╛рж░рзНржнрж╛рж░ ржЗржирж╕рзНржЯрж▓ (RHEL/CentOS/AlmaLinux)

```bash
sudo dnf install nfs-utils -y
# OR for Ubuntu:
sudo apt install nfs-kernel-server -y
```

### тЬЕ Step 2: ржбрж┐рж░рзЗржХрзНржЯрж░рж┐ рждрзИрж░рж┐ ржУ Permission

```bash
sudo mkdir -p /data/devops
sudo chown nobody:nobody /data/devops
sudo chmod 777 /data/devops  # ржЕржержмрж╛ ржирж┐рж░рж╛ржкрждрзНрждрж╛рж░ ржЬржирзНржп ACL/ржЧрзНрж░рзБржк ржмрзНржпржмрж╣рж╛рж░
```

### тЬЕ Step 3: `/etc/exports` ржП рж╢рзЗржпрж╝рж╛рж░ ржбрж┐ржлрж╛ржЗржи ржХрж░рзБржи

```bash
sudo tee /etc/exports <<EOF
/data/devops 192.168.0.0/24(rw,sync,no_root_squash,no_subtree_check)
EOF
```

> `rw` = read-write  
> `sync` = рж╕рзЗржл ржУржпрж╝рж╛ржЗржЯрж┐ржВ  
> `no_root_squash` = root ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯржХрзЗ root ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕  
> `no_subtree_check` = ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЙржирзНржирждрж┐

### тЬЕ Step 4: NFS рж╕рж╛рж░рзНржнрж┐рж╕ рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ ржУ ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓

```bash
sudo systemctl enable --now nfs-server
sudo firewall-cmd --permanent --add-service=nfs
sudo firewall-cmd --reload
```

### тЬЕ Step 5: ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржерзЗржХрзЗ ржорж╛ржЙржирзНржЯ (ржЕржирзНржп Linux ржорзЗрж╢рж┐ржирзЗ)

```bash
sudo mkdir /mnt/nfs-devops
sudo mount -t nfs 192.168.0.30:/data/devops /mnt/nfs-devops
```

> **ржЯрж┐ржк**: `/etc/fstab` ржП ржпрзЛржЧ ржХрж░рзЗ рж░рж┐ржмрзБржЯ ржкрж░рзНржпржирзНржд рж╕рзНржерж╛ржпрж╝рзА ржХрж░рзБржи:

```bash
192.168.0.30:/data/devops  /mnt/nfs-devops  nfs  defaults,_netdev  0 0
```

---

## 6. Step-by-Step: Samba Storage Server (Windows + Linux)

```bash
sudo dnf install samba samba-client -y
sudo mkdir -p /data/shared
sudo chmod 777 /data/shared
```

```bash
sudo tee /etc/samba/smb.conf <<EOF
[shared]
   path = /data/shared
   browseable = yes
   writable = yes
   guest ok = yes
   read only = no
EOF
```

```bash
sudo systemctl enable --now smb nmb
sudo firewall-cmd --permanent --add-service=samba
sudo firewall-cmd --reload
```

> **Windows ржерзЗржХрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕**:  
> `\\192.168.0.30\shared`

> **рж╕рж┐ржХрж┐ржЙрж░ ржнрж╛рж░рзНрж╕ржирзЗ** user-based auth (`smbpasswd -a username`) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред

---

## 7. рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржмрж┐ржмрзЗржЪржирж╛

- **ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓**: рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ subnet (192.168.0.0/24) ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржжрж┐ржи
- **SELinux**: `setsebool -P nfs_export_all_rw 1`
- **Access Control**: `exports` ржлрж╛ржЗрж▓рзЗ IP ржмрж╛ рж╣рзЛрж╕рзНржЯ рж▓рж┐ржорж┐ржЯ ржХрж░рзБржи
- **Audit Log**: `/var/log/messages`, `/var/log/samba/`

---

## 8. ржоржирж┐ржЯрж░рж┐ржВ ржУ ржорзЗржЗржиржЯрзЗржирзЗржирзНрж╕

```bash
df -hT                # ржбрж┐рж╕рзНржХ ржмрзНржпржмрж╣рж╛рж░
iostat -x 2           # I/O performance
du -sh /data/*        # ржХрзЛржи ржбрж┐рж░ ржХржд ржЬрж╛ржпрж╝ржЧрж╛ ржирж┐ржЪрзНржЫрзЗ
quota -u username     # ржбрж┐рж╕рзНржХ ржХрзЛржЯрж╛ (ржпржжрж┐ рж╕рзЗржЯ ржХрж░рж╛ ржерж╛ржХрзЗ)
journalctl -u nfs-server
```

> **Log Rotation**: `/etc/logrotate.d/`-ржП ржХрж╛рж╕рзНржЯржо ржХржиржлрж┐ржЧ

---

## 9. ржмрзНржпрж╛ржХржЖржк ржУ ржбрж┐ржЬрж╛рж╕рзНржЯрж╛рж░ рж░рж┐ржХржнрж╛рж░рж┐

- **rsync** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржирзНржп рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржмрзНржпрж╛ржХржЖржк:

```bash
rsync -avz /data/ backup-server:/backup/storage/
```

- **LVM Snapshot**:

```bash
lvcreate -L 10G -s -n snap_data /dev/vg_data/lv_shared
```

- **ZFS** (ржпржжрж┐ ржЪрж╛ржи advanced features like compression, checksum)

---

## 10. ржЙржирзНржиржд ржЯржкрж┐ржХ: GlusterFS / Ceph

ржпржжрж┐ ржЖржкржирж╛рж░ **рж╕рзНржХрзЗрж▓рзЗржмрж▓, ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯрзЗржб, рж╣рж╛ржЗ-ржПржнрзЗржЗрж▓рзЗржмрж▓** рж╕рзНржЯрзЛрж░рзЗржЬ рж▓рж╛ржЧрзЗ (10+ ржирзЛржб):

- **GlusterFS**: рж╕рж╣ржЬрзЗ рж╢рзБрж░рзБ ржХрж░рж╛ ржпрж╛ржпрж╝, POSIX-compliant
- **Ceph**: ржмрзНрж▓ржХ + ржЕржмржЬрзЗржХрзНржЯ + ржлрж╛ржЗрж▓ тАФ ржХрзНрж▓рж╛ржЙржб-ржЧрзНрж░рзЗржб (OpenStack, K8s Rook)

> ржЖржкржирж╛рж░ private cloud lab-ржП ржПржЧрзБрж▓рзЛ ржЯрзЗрж╕рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

---

## ЁЯОБ ржмрзЛржирж╛рж╕: ржЖржкржирж╛рж░ рж▓рзНржпрж╛ржмрзЗ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржЯрж┐ржкрж╕

- NFS рж╢рзЗржпрж╝рж╛рж░ ржХрзЗ **Kubernetes PersistentVolume** рж╣рж┐рж╕рж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи
- Samba рж╢рзЗржпрж╝рж╛рж░рзЗ **Windows 10/11** ржерзЗржХрзЗ ржлрж╛ржЗрж▓ ржХржкрж┐ ржХрж░рзЗ ржЯрзЗрж╕рзНржЯ ржХрж░рзБржи
- `nfsstat -m` ржжрж┐ржпрж╝рзЗ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржорж╛ржЙржирзНржЯ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржжрзЗржЦрзБржи

---

## ржЕрждрж┐рж░рж┐ржХрзНржд рж╕рзНржЯрзЛрж░рзЗржЬ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржЯрзЗржХржирж┐ржХрж╕

### 1. **Quota Management (ржмрзНржпржмрж╣рж╛рж░ рж╕рзАржорж╛ржмржжрзНржз ржХрж░рж╛)**
```bash
# /etc/fstab ржП grpquota,usrquota ржЕржкрж╢ржи ржпрзЛржЧ ржХрж░рзБржи
UUID=... /mnt/storage ext4 defaults,usrquota,grpquota 0 2

sudo quotacheck -cum /mnt/storage
sudo quotaon /mnt/storage
sudo edquota username
```

### 2. **LVM Snapshot**
```bash
sudo lvcreate -L 5G -s -n lv_snap /dev/vg_data/lv_storage
```

### 3. **Auto-mount with systemd (ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕рзНржЯрзЛрж░рзЗржЬ ржЬржирзНржп)**
```bash
sudo systemctl edit --full mnt-storage.mount
# Type=mount, What=/dev/sdb1, Where=/mnt/storage, etc.
```

### 4. **ACL (Advanced Permission)**
```bash
sudo setfacl -m u:sumon:rwx /mnt/storage/project
getfacl /mnt/storage/project
```

---

## рж╕рзНржЯрзЛрж░рзЗржЬ ржоржирж┐ржЯрж░рж┐ржВ, ржорзЗржЗржиржЯрзЗржирзНржпрж╛ржирзНрж╕ ржУ ржЯрзНрж░рж╛ржмрж▓рж╢рзБржЯрж┐ржВ

### ржоржирж┐ржЯрж░рж┐ржВ ржЯрзБрж▓рж╕
- `df -h` тЖТ ржбрж┐рж╕рзНржХ ржмрзНржпржмрж╣рж╛рж░
- `du -sh /mnt/storage/*` тЖТ ржлрзЛрж▓рзНржбрж╛рж░ ржУржпрж╝рж╛ржЗржЬ ржмрзНржпржмрж╣рж╛рж░
- `iostat -x 2` тЖТ I/O ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕
- `smartctl -a /dev/sdb` тЖТ ржбрж┐рж╕рзНржХ рж╣рзЗрж▓рже

### ржорзЗржЗржиржЯрзЗржирзНржпрж╛ржирзНрж╕
- **fsck**: ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо ржЪрзЗржХ (unmounted ржЕржмрж╕рзНржерж╛ржпрж╝)
  ```bash
  sudo umount /dev/sdb1
  sudo fsck -y /dev/sdb1
  ```
- **xfs_repair**: XFS ржЬржирзНржп
- **btrfs check**: Btrfs ржЬржирзНржп

### рж╕рж╛ржзрж╛рж░ржг ржЗрж╕рзНржпрзБ ржУ рж╕ржорж╛ржзрж╛ржи
| рж╕ржорж╕рзНржпрж╛ | рж╕ржорж╛ржзрж╛ржи |
|--------|--------|
| тАЬRead-only file systemтАЭ | `mount -o remount,rw /mnt/storage` ржмрж╛ fsck |
| fstab ржП ржнрзБрж▓ рж╣рж▓рзЗ ржмрзБржЯ ржирж╛ рж╣ржУржпрж╝рж╛ | `mount -o remount,rw /` ржПржмржВ fstab ржарж┐ржХ ржХрж░рзБржи |
| LVM ржнрж▓рж┐ржЙржо ржирж╛ ржжрзЗржЦрж╛ | `vgscan && vgchange -ay` |

---

## рж╕рзБрж░ржХрзНрж╖рж╛ ржмрж┐ржмрзЗржЪржирж╛ (Security Best Practices)

1. **SELinux/AppArmor**: рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржЪрж╛рж▓рзБ рж░рж╛ржЦрзБржиред
2. **ржлрж╛ржпрж╝рж╛рж░ржУржпрж╝рж╛рж▓**: `firewalld` ржмрж╛ `ufw` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
   - NFS тЖТ TCP/2049
   - SMB тЖТ TCP/139,445
   - iSCSI тЖТ TCP/3260
3. **ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ IP Whitelisting**: `exports` (NFS), `smb.conf` (Samba)
4. **ржПржиржХрзНрж░рж┐ржкрж╢ржи**: LUKS (Full Disk Encryption) ржмрж╛ `encfs` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
5. **ржмрзНржпрж╛ржХржЖржк**: `rsync`, `borg`, `restic` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж┐ржпрж╝ржорж┐ржд ржмрзНржпрж╛ржХржЖржк ржирж┐ржиред

---

## ржЙржкрж╕ржВрж╣рж╛рж░

Linux-ржнрж┐рждрзНрждрж┐ржХ рж╕рзНржЯрзЛрж░рзЗржЬ рж╕рж╛рж░рзНржнрж╛рж░ ржХрзЗржмрж▓ ржбрж┐рж╕рзНржХ ржорж╛ржЙржирзНржЯ ржХрж░рзЗ рж╢рзЗржпрж╝рж╛рж░ ржХрж░рж╛ ржиржпрж╝тАФржПржЯрж┐ ржПржХржЯрж┐ **ржХржоржкрзНрж▓рж┐ржЯ рж╕рзНржЯрзЛрж░рзЗржЬ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржбрж┐ржЬрж╛ржЗржи** ржпрж╛ рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐, рж╕рзБрж░ржХрзНрж╖рж╛, ржоржирж┐ржЯрж░рж┐ржВ, ржПржмржВ ржорзЗржЗржиржЯрзЗржирзНржпрж╛ржирзНрж╕ржХрзЗ ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржХрж░рзЗред

ржПржЗ ржЧрж╛ржЗржбрзЗ ржЖржкржирж┐ рж╢рж┐ржЦрж▓рзЗржи:
- ржХрж┐ржнрж╛ржмрзЗ ржбрж┐рж╕рзНржХ ржЪрзЗржХ, ржкрж╛рж░рзНржЯрж┐рж╢ржи, ржлрж░ржорзНржпрж╛ржЯ ржХрж░ржмрзЗржи
- ржХрзЛржи ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи
- ржХрзАржнрж╛ржмрзЗ рж╕рзНржерж╛ржпрж╝рзА ржорж╛ржЙржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░ржмрзЗржи
- NFS/SMB/iSCSI ржЫрж╛ржбрж╝рж╛ржУ ржЕржирзНржпрж╛ржирзНржп рж╕рзНржЯрзЛрж░рзЗржЬ ржорзЗржержб
- ржХрж┐ржнрж╛ржмрзЗ рж╕рзЗржл, рж╕рзНржХрзЗрж▓рзЗржмрж▓ ржУ ржорзЗржЗржиржЯрзЗржЗржирзЗржмрж▓ рж╕рзНржЯрзЛрж░рзЗржЬ рж╕рж┐рж╕рзНржЯрзЗржо рждрзИрж░рж┐ ржХрж░ржмрзЗржи

> ЁЯУМ **ржкрж░ржмрж░рзНрждрзА ржкржжржХрзНрж╖рзЗржк**:  
> - ржирж┐ржЬрзЗрж░ рж▓рзНржпрж╛ржмрзЗ GlusterFS ржмрж╛ MinIO рж╕рзЗржЯржЖржк ржХрж░рзБржиред  
> - LVM + Snapshots ржжрж┐ржпрж╝рзЗ ржмрзНржпрж╛ржХржЖржк рж╕рзНржЯрзНрж░рзНржпрж╛ржЯрзЗржЬрж┐ рждрзИрж░рж┐ ржХрж░рзБржиред  
> - рж╕рзНржЯрзЛрж░рзЗржЬ ржоржирж┐ржЯрж░рж┐ржВржпрж╝рзЗрж░ ржЬржирзНржп `Prometheus + Node Exporter` ржЗржирзНржЯрж┐ржЧрзНрж░рзЗржЯ ржХрж░рзБржиред

---

#### Reference

- [Linux-iscsi_storage-linuxhint](https://linuxhint.com/install_iscsi_storage_server_centos)
- [Linux-iscsi_storage-vpsie](https://vpsie.com/knowledge-base/install-and-configure-iscsi-storage-server-on-ubuntu-22-04/)
- [Linux-iscsi_storage-howtoforge](https://www.howtoforge.com/how-to-install-iscsi-storage-server-on-ubuntu-22-04/)
